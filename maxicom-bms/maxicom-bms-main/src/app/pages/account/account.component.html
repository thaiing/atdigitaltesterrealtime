<div class="page-container">
  <div class="header-content">
    <h1 class="page-title">
      <mat-icon class="title-icon">person</mat-icon>
      Account Settings
    </h1>
    <p class="page-subtitle">
      Change Administrator Password
    </p>
  </div>

  <mat-card class="account-card mat-elevation-z4">
    <mat-card-header>
      <mat-card-title>Change password</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="passwordForm" (ngSubmit)="onSubmit()" class="account-form">
        <mat-form-field appearance="outline">
          <mat-label>Old password</mat-label>
          <input
            matInput
            [type]="isOldHidden ? 'password' : 'text'"
            formControlName="oldPassword"
          />
          <button
            mat-icon-button
            matSuffix
            type="button"
            (click)="isOldHidden = !isOldHidden"
          >
            <mat-icon>
              {{ isOldHidden ? 'visibility_off' : 'visibility' }}
            </mat-icon>
          </button>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>New password</mat-label>
          <input
            matInput
            [type]="isNewHidden ? 'password' : 'text'"
            formControlName="newPassword"
          />
          <button
            mat-icon-button
            matSuffix
            type="button"
            (click)="isNewHidden = !isNewHidden"
          >
            <mat-icon>
              {{ isNewHidden ? 'visibility_off' : 'visibility' }}
            </mat-icon>
          </button>
          <mat-error *ngIf="passwordForm.get('newPassword')?.errors?.['minlength']">
            Password must be at least 6 characters long
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Confirm new password</mat-label>
          <input
            matInput
            [type]="isConfirmHidden ? 'password' : 'text'"
            formControlName="confirmPassword"
          />
          <button
            mat-icon-button
            matSuffix
            type="button"
            (click)="isConfirmHidden = !isConfirmHidden"
          >
            <mat-icon>
              {{ isConfirmHidden ? 'visibility_off' : 'visibility' }}
            </mat-icon>
          </button>
          <mat-error *ngIf="passwordForm.errors?.['passwordMismatch']">
            Passwords do not match!
          </mat-error>
        </mat-form-field>

        <button
          mat-flat-button
          color="primary"
          type="submit"
          [disabled]="passwordForm.invalid || isLoading"
          class="save-button"
        >
          {{ isLoading ? 'Saving...' : 'Save Changes' }}
        </button>
      </form>
    </mat-card-content>
  </mat-card>
</div>
